# 하룰랄라 로컬 테스트 가이드

## 1. 기본 로컬 실행 방법

### 방법 1: Gradle로 실행 (로컬 프로필 사용)
```bash
# Windows
gradlew.bat bootRun --args='--spring.profiles.active=local'

# Mac/Linux
./gradlew bootRun --args='--spring.profiles.active=local'
```

### 방법 2: IDE에서 실행
- IntelliJ IDEA / Eclipse에서 `HarullalaApplication` 실행
- Run Configuration에서 Active profiles에 `local` 추가

## 2. 로컬 프로필 설정 (application-local.yml)

로컬 프로필을 사용하면:
- ✅ H2 인메모리 데이터베이스 사용 (별도 MySQL 설치 불필요)
- ✅ H2 Console 사용 가능: http://localhost:8080/h2-console
- ✅ 기본 테스트용 설정값 제공

## 3. 통합 테스트 HTML 사용

### 접속 방법
1. 애플리케이션 실행 후 브라우저에서 접속:
   ```
   http://localhost:8080/integration-test.html
   ```

2. 테스트 가능한 기능:
   - ✅ 카카오/애플 로그인
   - ✅ 친구 요청/수락
   - ✅ 친구 목록 조회
   - ✅ **친구 피드 조회** (00시 기준 테스트 가능)
   - ✅ 감정 기록 작성/조회
   - ✅ AI 피드백 생성

## 4. 친구 피드 00시 기준 테스트 방법

### 방법 1: 실제 시간 대기
- 자정(00시)이 지나면 전날 글은 자동으로 사라짐
- 실제로 시간이 지나야 확인 가능

### 방법 2: 코드에서 시간 조작 (개발용)
테스트를 위해 `FriendFeedService.java`에서 임시로 시간을 조작할 수 있습니다:

```java
// 테스트용: 어제 00시로 설정
LocalDateTime startOfDay = LocalDateTime.now()
    .minusDays(1)  // 테스트용: 하루 전
    .withHour(0).withMinute(0).withSecond(0).withNano(0);
```

### 방법 3: 통합 테스트 HTML 사용
1. `http://localhost:8080/integration-test.html` 접속
2. 로그인 후 "친구 피드 조회" 버튼 클릭
3. 결과 확인

## 5. 환경 변수 설정 (선택사항)

로컬 프로필에서는 대부분 기본값이 제공되지만, 필요시 환경 변수 설정:

```bash
# Windows (cmd)
set KAKAO_RESTAPI_KEY=your-key
set OPENAI_API_KEY=your-key

# Windows (PowerShell)
$env:KAKAO_RESTAPI_KEY="your-key"
$env:OPENAI_API_KEY="your-key"

# Mac/Linux
export KAKAO_RESTAPI_KEY=your-key
export OPENAI_API_KEY=your-key
```

## 6. 데이터베이스 확인

로컬 프로필 사용 시 H2 Console 접속:
- URL: http://localhost:8080/h2-console
- JDBC URL: `jdbc:h2:mem:testdb`
- Username: `sa`
- Password: (비워두기)

## 7. 주의사항

⚠️ **00시 기준 테스트의 한계**
- 실제로 자정이 지나야 전날 데이터가 사라지는지 확인 가능
- 개발 환경에서는 시간 조작이 필요할 수 있음
- 프로덕션 배포 전 충분한 테스트 권장

